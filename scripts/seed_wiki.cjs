const sqlite3 = require('sqlite3').verbose();
const path = require('path');

const dbPath = path.resolve(__dirname, '../server/database.sqlite');
const db = new sqlite3.Database(dbPath);

const requesterGuideContent = `
# ğŸ§‘â€ğŸ’» ì´ìŠˆ íŠ¸ë˜ì»¤ ì‚¬ìš© ê°€ì´ë“œ (ìš”ì²­ì)

ì´ ë¬¸ì„œëŠ” **ìš”ì²­ì(Requester)**ë¡œì„œ ì´ìŠˆë¥¼ ë“±ë¡í•˜ê³  ì‘ì—…ì„ ê²€ìˆ˜í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.

## 1. ì´ìŠˆ ë“±ë¡
- **ìƒˆ ì´ìŠˆ ë§Œë“¤ê¸°**: ë©”ì¸ í™”ë©´ ìš°ì¸¡ ìƒë‹¨ì˜ \`+ ìƒˆ ì´ìŠˆ\` ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
- **í•„ìˆ˜ ì…ë ¥**: ì œëª©, ì„¤ëª…, ì¤‘ìš”ë„(Priority)ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
- **ì²¨ë¶€íŒŒì¼**: ê´€ë ¨ ë¬¸ì„œë‚˜ ì°¸ê³  ì´ë¯¸ì§€ê°€ ìˆë‹¤ë©´ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ ì„ íƒí•˜ì—¬ ì²¨ë¶€í•˜ì„¸ìš”.
- **ì‹œì‘/ë§ˆê°ì¼**: ì‘ì—… ì¼ì •(Schedule)ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 2. ì´ìŠˆ ìˆ˜ì • ë° ì‚­ì œ
- ë³¸ì¸ì´ ë“±ë¡í•œ ì´ìŠˆëŠ” 'OPEN' ìƒíƒœì¼ ë•Œ ìˆ˜ì •í•˜ê±°ë‚˜ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì´ë¯¸ ì§„í–‰ ì¤‘ì¸ ì´ìŠˆëŠ” ë‚´ìš© ìˆ˜ì •ì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 3. ê²€ìˆ˜ ë° ìŠ¹ì¸ (Approval Workflow)
ë‹´ë‹¹ìê°€ ì‘ì—…ì„ ì™„ë£Œí•˜ë©´ ê²€ìˆ˜ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.
- **ê²€ìˆ˜ ëŒ€ê¸°**: ìƒíƒœê°€ **[í™•ì¸ í•„ìš”]**ë¡œ ë³€ê²½ë˜ë©´ ìš”ì²­ìì—ê²Œ ê²€ìˆ˜ ê¶Œí•œì´ ìƒê¹ë‹ˆë‹¤.
- **ìŠ¹ì¸ (ì™„ë£Œ ì²˜ë¦¬)**: ì‘ì—… ê²°ê³¼ê°€ ë§Œì¡±ìŠ¤ëŸ¬ìš°ë©´ **[ìŠ¹ì¸]** ë²„íŠ¼ì„ ëˆŒëŸ¬ ì´ìŠˆë¥¼ ì¢…ë£Œ(CLOSED)í•©ë‹ˆë‹¤.
- **ë°˜ë ¤ (ì¬ì§„í–‰)**: ì¶”ê°€ ìˆ˜ì •ì´ í•„ìš”í•˜ë©´ **[ë°˜ë ¤]** ë²„íŠ¼ì„ ëˆŒëŸ¬ ìƒíƒœë¥¼ 'ì§„í–‰ ì¤‘'ìœ¼ë¡œ ë˜ëŒë¦¬ê³  ì½”ë©˜íŠ¸ë¥¼ ë‚¨ê¹ë‹ˆë‹¤.

---
*ì°¸ê³ : ì „ì²´ ì¼ì •ì€ ìƒë‹¨ 'ìŠ¤ì¼€ì¤„' ë©”ë‰´ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.*
`;

const assigneeGuideContent = `
# ğŸ› ï¸ ì´ìŠˆ íŠ¸ë˜ì»¤ ì‚¬ìš© ê°€ì´ë“œ (ë‹´ë‹¹ì)

ì´ ë¬¸ì„œëŠ” **ë‹´ë‹¹ì(Assignee)**ë¡œì„œ í• ë‹¹ëœ ì´ìŠˆë¥¼ ì²˜ë¦¬í•˜ê³  ê²°ê³¼ë¥¼ ê¸°ë¡í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.

## 1. ì‘ì—… ì‹œì‘
- ë‚˜ì—ê²Œ í• ë‹¹ëœ ì´ìŠˆëŠ” ë©”ì¸ í™”ë©´ì´ë‚˜ ìŠ¤ì¼€ì¤„ ë·°ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **ì§„í–‰ ì‹œì‘**: ì‘ì—…ì„ ì‹œì‘í•  ë•Œ **[ì§„í–‰ ì‹œì‘]** ë²„íŠ¼ì„ ëˆŒëŸ¬ ìƒíƒœë¥¼ \`IN_PROGRESS\`ë¡œ ë³€ê²½í•˜ì„¸ìš”.

## 2. ê°œë°œ ë° ì»¤ë°‹ (VCS ì—°ë™)
ì†ŒìŠ¤ ì½”ë“œ(Git/SVN) ì»¤ë°‹ ì‹œ ë©”ì‹œì§€ì— ì´ìŠˆ ë²ˆí˜¸ë¥¼ í¬í•¨í•˜ë©´ ìë™ìœ¼ë¡œ ì—°ë™ë©ë‹ˆë‹¤. (ìƒì„¸ í™”ë©´ ë…¸ì¶œ)

- **ê·œì¹™**: ì»¤ë°‹ ë©”ì‹œì§€ì— **#ì´ìŠˆë²ˆí˜¸** í¬í•¨
- **ì˜ˆì‹œ**: \`Fix login bug #42 - ë¡œê·¸ì¸ ì˜¤ë¥˜ ìˆ˜ì •\`
- *ì°¸ê³ : ê´€ë ¨ëœ ì»¤ë°‹ ë‚´ì—­ì´ ìˆì„ ë•Œë§Œ ìƒì„¸ í™”ë©´ í•˜ë‹¨ì— í‘œì‹œë©ë‹ˆë‹¤.*

## 3. ê²°ê³¼ ê¸°ë¡ ë° ê²€ìˆ˜ ìš”ì²­
ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ìš”ì²­ìì—ê²Œ í™•ì¸ì„ ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.

- **ì²˜ë¦¬ ê²°ê³¼ ì‘ì„±**: ìƒì„¸ í™”ë©´ í•˜ë‹¨ì˜ 'ì²˜ë¦¬ ê²°ê³¼' ì—ë””í„°ì— ì‘ì—… ë‚´ì—­(í•´ê²° ë°©ë²•, ë³€ê²½ ì‚¬í•­ ë“±)ì„ ìƒì„¸íˆ ê¸°ë¡í•˜ê³  **[ì €ì¥]**í•©ë‹ˆë‹¤.
- **ê²€ìˆ˜ ìš”ì²­**: **[ì²˜ë¦¬ ì™„ë£Œ (ê²€ìˆ˜ ìš”ì²­)]** ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ìƒíƒœê°€ \`VERIFICATION_NEEDED\`ë¡œ ë³€ê²½ë˜ë©° ìš”ì²­ìì—ê²Œ ê²€ìˆ˜ê°€ ìš”ì²­ë©ë‹ˆë‹¤.

---
*íŒ: ëŒ“ê¸€ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ íŒ€ì›ë“¤ê³¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì†Œí†µí•˜ì„¸ìš”.*
`;

const adminGuideContent = `
# ğŸ›¡ï¸ ê´€ë¦¬ì ë©”ë‰´ ê°€ì´ë“œ

**ê´€ë¦¬ì(Admin)** ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë©”ë‰´ì…ë‹ˆë‹¤.

## 1. ì‚¬ìš©ì ê´€ë¦¬ (User Management)
- **ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ**: ë“±ë¡ëœ ëª¨ë“  ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **ì •ë³´ ìˆ˜ì •**: [ìˆ˜ì •] ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì‚¬ìš©ìì˜ ì´ë¦„, ì—­í• (Role) ë“±ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - **Role**: USER (ì¼ë°˜ ì‚¬ìš©ì) / ADMIN (ê´€ë¦¬ì)

## 2. ê¶Œí•œ ê´€ë¦¬
- ê´€ë¦¬ìëŠ” ë‹¤ë¥¸ ì‚¬ìš©ìì—ê²Œ ê´€ë¦¬ì ê¶Œí•œì„ ë¶€ì—¬í•˜ê±°ë‚˜ íšŒìˆ˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---
**ì£¼ì˜**: ê´€ë¦¬ì ê¸°ëŠ¥ì€ ì‹œìŠ¤í…œì— í° ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì£¼ì˜í•´ì„œ ì‚¬ìš©í•´ ì£¼ì„¸ìš”.
`;

function seedWiki() {
    db.serialize(() => {
        console.log('ğŸ“˜ Seeding Wiki Pages...');
        const now = new Date().toISOString();

        // 1. Requester Guide
        db.run(`INSERT OR REPLACE INTO pages (id, title, content, updatedAt, required_role) VALUES (?, ?, ?, ?, ?)`,
            ['guide-requester', 'ì´ìŠˆ íŠ¸ë˜ì»¤ ì‚¬ìš© ê°€ì´ë“œ (ìš”ì²­ì)', requesterGuideContent, now, 'USER'],
            (err) => {
                if (!err) console.log('âœ… Requester Guide Inserted');
            }
        );

        // 2. Assignee Guide
        db.run(`INSERT OR REPLACE INTO pages (id, title, content, updatedAt, required_role) VALUES (?, ?, ?, ?, ?)`,
            ['guide-assignee', 'ì´ìŠˆ íŠ¸ë˜ì»¤ ì‚¬ìš© ê°€ì´ë“œ (ë‹´ë‹¹ì)', assigneeGuideContent, now, 'USER'],
            (err) => {
                if (!err) console.log('âœ… Assignee Guide Inserted');
            }
        );

        // 3. Admin Guide (Admin Only)
        db.run(`INSERT OR REPLACE INTO pages (id, title, content, updatedAt, required_role) VALUES (?, ?, ?, ?, ?)`,
            ['admin-guide', 'ê´€ë¦¬ì ë©”ë‰´ ê°€ì´ë“œ', adminGuideContent, now, 'ADMIN'],
            (err) => {
                if (!err) console.log('âœ… Admin Guide Inserted');
            }
        );

        // Remove old combined guide if exists
        db.run(`DELETE FROM pages WHERE id = 'guide'`, (err) => {
            if (!err) console.log('ğŸ—‘ï¸ Removed old combined guide');
        });
    });
}

seedWiki();
